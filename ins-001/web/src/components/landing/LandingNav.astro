---
/**
 * Landing Page Navigation
 * Adapted from phronos-site Nav.astro for instruments domain (dark mode)
 */

import { PhronosLogo } from '../ui/PhronosLogo';
import { NavAuthButton } from '../auth/NavAuthButton';
---

<nav class="nav">
  <a href="https://phronos.org" class="nav-brand">
    <PhronosLogo size={31} theme="dark" client:only="react" />
    <span class="nav-wordmark">Phronos</span>
  </a>

  <ul class="nav-links">
    <li><a href="https://phronos.org/dispatches" class="nav-link">Dispatches</a></li>
    <li><a href="https://phronos.org/library/" class="nav-link">Library</a></li>
    <li><a href="https://phronos.org/methods" class="nav-link">Methods</a></li>
    <li><a href="/" class="nav-link nav-link-active">Instruments</a></li>
  </ul>

  <NavAuthButton client:load variant="desktop" />

  <button class="nav-hamburger" aria-label="Open menu">
    <span></span>
    <span></span>
    <span></span>
  </button>
</nav>

<!-- Mobile Menu -->
<div class="nav-mobile-menu">
  <div class="nav-mobile-header">
    <a href="https://phronos.org" class="nav-brand">
      <PhronosLogo size={31} theme="dark" client:only="react" />
      <span class="nav-wordmark">Phronos</span>
    </a>
    <button class="nav-mobile-close" aria-label="Close menu"></button>
  </div>

  <div class="nav-mobile-links">
    <a href="https://phronos.org/dispatches" class="nav-mobile-link">Dispatches</a>
    <a href="https://phronos.org/library/" class="nav-mobile-link">Library</a>
    <a href="https://phronos.org/methods" class="nav-mobile-link">Methods</a>
    <a href="/" class="nav-mobile-link nav-mobile-link-active">Instruments</a>
  </div>

  <NavAuthButton client:load variant="mobile" />
</div>

<script>
  function initNav() {
    const hamburger = document.querySelector('.nav-hamburger');
    const mobileMenu = document.querySelector('.nav-mobile-menu');
    const closeBtn = document.querySelector('.nav-mobile-close');

    hamburger?.addEventListener('click', () => {
      mobileMenu?.classList.add('is-open');
      document.body.style.overflow = 'hidden';
    });

    closeBtn?.addEventListener('click', () => {
      mobileMenu?.classList.remove('is-open');
      document.body.style.overflow = '';
    });

    // Close menu when clicking a link
    const mobileLinks = document.querySelectorAll('.nav-mobile-link:not(.nav-mobile-link-disabled)');
    mobileLinks.forEach((link) => {
      link.addEventListener('click', () => {
        mobileMenu?.classList.remove('is-open');
        document.body.style.overflow = '';
      });
    });
  }

  initNav();
  document.addEventListener('astro:after-swap', initNav);
</script>

<style>
  /*
   * LandingNav-specific styles only.
   * All NavAuthButton styles are in components.css (required for React components)
   */
</style>
